package handlers

// type handlerTransaction struct {
// 	TransactionRepository repositories.TransactionRepository
// }

// func handlerTransaction(TransactionRepository repositories.TransactionRepository) *handlerTransaction {
// 	return &handlerTransaction{TransactionRepository}
// }

// func (h *handlerTransaction) FindTransactions(w http.ResponseWriter, r *http.Request) {
// 	w.Header().Set("Content-Type", "application/json")

// 	userInfo := r.Context().Value("userInfo").(jwt.MapClaims)
// 	userId := int(userInfo["id"].(float64))

// 	transactions, err := h.TransactionRepository.FindTransactions(userId)
// 	if err != nil {
// 		w.WriteHeader(http.StatusInternalServerError)
// 		json.NewEncoder(w).Encode(err.Error())
// 	}

// 	var responseTransaction []transactiondto.TransactionResponse
// 	for _, t := range transactions {
// 		responseTransaction = append(responseTransaction, convertResponseTransaction(t))
// 	}

// 	for i, t := range responseTransaction {
// 		imagePath := os.Getenv("PATH_FILE") + t.Product.image
// 		responseTransaction[i].Product.Image = imagePath
// 	}

// 	w.WriteHeader(http.StatusOK)
// 	response := dto.SuccessResult{Code: http.StatusOK, Data: ResponseTransaction}
// 	json.NewEncoder(w).Encode(response)
// }

// func (h *handlerTransaction) CreateTransaction(w http.ResponseWriter, r *http.Request) {
// 	w.Header().Set("Content-Type", "application/json")

// 	userInfo := r.Context().Value("userInfo").(jwt.MapClaims)
// 	userId := int(userInfo["id"].(float64))

// 	var request transactiondto.TransactionRequest
// 	err := json.NewDecoder(r.Body).Decode(&request)

// 	if err != nil {
// 		w.WriteHeader(http.StatusBadRequest)
// 		response := dto.ErrorResult{Code: http.StatusBadRequest, Message: err.Error()}
// 		json.NewEncoder(w).Encode(response)
// 		return
// 	}

// 	transaction := models.Transaction{
// 		ProductID: request.ProductId,
// 		BuyerID:   userId,
// 		SellerID:  request.sellerId,
// 		Price:     request.Price,
// 		Status:    "Pending",
// 	}
// 	newTransaction, err := h.TransactionRepository.CreateTransaction(transaction)
// 	if err != nil {
// 		w.WriteHeader(http.StatusInternalServerError)
// 		json.NewEncoder(w).Encode(err.Error())
// 	}

// 	dataTransactions, err := h.TransactionRepository.GetTransaction(newTransaction.ID)
// 	if err != nil {
// 		w.WriteHeader(http.StatusInternalServerError)
// 		json.NewEncoder(w).Encode(err.Error())
// 	}

// 	w.WriteHeader(http.StatusOK)
// 	response := dto.SuccessResult{Code: http.StatusOK, Data: convertResponseTransaction(dataTransactions)}
// 	json.NewEncoder(w).Encode(response)
// }

// func convertResponseTransaction(t models.Transaction) transactiondto.TransactionResponse {
// 	return transactiondto.TransactionResponse{
// 		ID:      t.ID,
// 		Product: t.Product,
// 		Buyer:   t.Buyer,
// 		Seller:  t.Seller,
// 		Price:   t.Price,
// 		Status:  t.Status,
// 	}
// }
